{"version":3,"file":"static/js/main.b89bea14.js","mappings":"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","sources":["screens/LoginScreen.js","screens/SignUpScreen.js","screens/FriendsList.js","screens/Chat.js","App.js","webpack/bootstrap","webpack/runtime/amd options","webpack/runtime/chunk loaded","webpack/runtime/compat get default export","webpack/runtime/define property getters","webpack/runtime/global","webpack/runtime/hasOwnProperty shorthand","webpack/runtime/make namespace object","webpack/runtime/publicPath","webpack/runtime/jsonp chunk loading","webpack/startup"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { StyleSheet, Text, View, TextInput, TouchableOpacity, ImageBackground, SafeAreaView, Platform } from 'react-native';\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport { signInWithEmailAndPassword } from 'firebase/auth';\r\nimport { auth, db } from '../App';\r\nimport * as Location from 'expo-location';\r\nimport { doc, setDoc, serverTimestamp } from 'firebase/firestore';\r\nimport * as Device from 'expo-device';\r\n\r\nexport default function LoginScreen({ navigation }) {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const getCurrentLocation = async () => {\r\n    try {\r\n      const { status } = await Location.requestForegroundPermissionsAsync();\r\n      if (status !== 'granted') {\r\n        return null;\r\n      }\r\n\r\n      const location = await Location.getCurrentPositionAsync({});\r\n      return {\r\n        latitude: location.coords.latitude,\r\n        longitude: location.coords.longitude,\r\n        accuracy: location.coords.accuracy,\r\n        timestamp: new Date().toISOString()\r\n      };\r\n    } catch (error) {\r\n      console.error('Location error:', error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const getDeviceInfo = async () => {\r\n    return {\r\n      brand: Device.brand || 'unknown',\r\n      modelName: Device.modelName || 'unknown',\r\n      osName: Device.osName || Platform.OS,\r\n      osVersion: Device.osVersion || Platform.Version,\r\n      platform: Platform.OS\r\n    };\r\n  };\r\n\r\n  const handleLogin = async () => {\r\n    if (!email.trim() || !password.trim()) {\r\n      setError('Email and password are required');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      setError('');\r\n\r\n      // Sign in user\r\n      const userCredential = await signInWithEmailAndPassword(auth, email, password);\r\n      const user = userCredential.user;\r\n\r\n      // Get location and device info\r\n      const [locationData, deviceInfo] = await Promise.all([\r\n        getCurrentLocation(),\r\n        getDeviceInfo()\r\n      ]);\r\n\r\n      // Update user document with login info\r\n      await setDoc(doc(db, 'users', user.uid), {\r\n        lastLogin: serverTimestamp(),\r\n        lastSeen: serverTimestamp(),\r\n        location: locationData || { latitude: 0, longitude: 0 },\r\n        deviceInfo: deviceInfo\r\n      }, { merge: true });\r\n\r\n      // Add login location to history if available\r\n      if (locationData) {\r\n        const historyId = new Date().toISOString();\r\n        await setDoc(doc(db, `users/${user.uid}/locationHistory/${historyId}`), {\r\n          ...locationData,\r\n          type: 'login',\r\n          timestamp: serverTimestamp()\r\n        });\r\n      }\r\n\r\n    } catch (error) {\r\n      let errorMessage = 'Invalid email or password';\r\n      if (error.code === 'auth/user-not-found' || error.code === 'auth/wrong-password') {\r\n        errorMessage = 'Invalid email or password';\r\n      } else if (error.code === 'auth/invalid-email') {\r\n        errorMessage = 'Invalid email address';\r\n      } else if (error.code === 'auth/too-many-requests') {\r\n        errorMessage = 'Too many attempts. Please try again later';\r\n      }\r\n      setError(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <SafeAreaView style={styles.safeArea}>\r\n      <ImageBackground \r\n        source={require('../assets/background4c.jpg')} \r\n        style={styles.container}\r\n        resizeMode=\"cover\"\r\n        defaultSource={require('../assets/background4c.jpg')}\r\n      >\r\n        <View style={styles.overlay}>\r\n          <Text style={styles.appName}>Vault</Text>\r\n          <Text style={styles.title}>Welcome Back</Text>\r\n\r\n          <View style={styles.inputContainer}>\r\n            <Ionicons name=\"mail-outline\" size={24} color=\"#666\" style={styles.inputIcon} />\r\n            <TextInput\r\n              style={styles.input}\r\n              placeholder=\"Email\"\r\n              value={email}\r\n              onChangeText={setEmail}\r\n              autoCapitalize=\"none\"\r\n              keyboardType=\"email-address\"\r\n            />\r\n          </View>\r\n\r\n          <View style={styles.inputContainer}>\r\n            <Ionicons name=\"lock-closed-outline\" size={24} color=\"#666\" style={styles.inputIcon} />\r\n            <TextInput\r\n              style={styles.input}\r\n              placeholder=\"Password\"\r\n              value={password}\r\n              onChangeText={setPassword}\r\n              secureTextEntry={!showPassword}\r\n            />\r\n            <TouchableOpacity\r\n              style={styles.eyeIcon}\r\n              onPress={() => setShowPassword(!showPassword)}\r\n            >\r\n              <Ionicons\r\n                name={showPassword ? 'eye-off' : 'eye'}\r\n                size={24}\r\n                color=\"#666\"\r\n              />\r\n            </TouchableOpacity>\r\n          </View>\r\n\r\n          {error ? <Text style={styles.errorText}>{error}</Text> : null}\r\n\r\n          <TouchableOpacity \r\n            style={[styles.button, loading && styles.buttonDisabled]} \r\n            onPress={handleLogin}\r\n            disabled={loading}\r\n          >\r\n            <Text style={styles.buttonText}>\r\n              {loading ? 'Logging in...' : 'Login'}\r\n            </Text>\r\n          </TouchableOpacity>\r\n\r\n          <TouchableOpacity \r\n            style={styles.secondaryButton} \r\n            onPress={() => navigation.navigate('SignUp')}\r\n          >\r\n            <Text style={styles.secondaryButtonText}>\r\n              Don't have an account? <Text style={styles.boldText}>Sign Up</Text>\r\n            </Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </ImageBackground>\r\n    </SafeAreaView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  safeArea: {\r\n    flex: 1,\r\n    backgroundColor: '#000',\r\n  },\r\n  container: {\r\n    flex: 1,\r\n    width: '100%',\r\n    height: '100%',\r\n    backgroundColor: '#1a1a1a',\r\n  },\r\n  overlay: {\r\n    flex: 1,\r\n    backgroundColor: 'rgba(0, 0, 0, 0.3)',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    padding: 20,\r\n  },\r\n  appName: {\r\n    fontSize: 42,\r\n    fontWeight: 'bold',\r\n    color: '#FFFFFF',\r\n    marginBottom: 10,\r\n    letterSpacing: 2,\r\n  },\r\n  title: {\r\n    fontSize: 24,\r\n    fontWeight: '600',\r\n    color: '#FFFFFF',\r\n    marginBottom: 40,\r\n  },\r\n  inputContainer: {\r\n    width: '100%',\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n    borderRadius: 10,\r\n    marginBottom: 15,\r\n    backgroundColor: '#fff',\r\n  },\r\n  input: {\r\n    flex: 1,\r\n    height: 50,\r\n    paddingHorizontal: 15,\r\n    fontSize: 16,\r\n  },\r\n  inputIcon: {\r\n    paddingLeft: 15,\r\n  },\r\n  button: {\r\n    backgroundColor: '#333',\r\n    width: '100%',\r\n    padding: 15,\r\n    borderRadius: 10,\r\n    alignItems: 'center',\r\n    shadowColor: '#000',\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 2,\r\n    },\r\n    shadowOpacity: 0.25,\r\n    shadowRadius: 3.84,\r\n    elevation: 5,\r\n    marginBottom: 15,\r\n  },\r\n  buttonText: {\r\n    color: '#fff',\r\n    fontSize: 16,\r\n    fontWeight: 'bold',\r\n  },\r\n  secondaryButton: {\r\n    padding: 10,\r\n  },\r\n  secondaryButtonText: {\r\n    color: '#FFFFFF',\r\n    fontSize: 16,\r\n  },\r\n  boldText: {\r\n    fontWeight: 'bold',\r\n    color: '#FFFFFF',\r\n  },\r\n  errorText: {\r\n    color: '#ff6b6b',\r\n    marginBottom: 10,\r\n    textAlign: 'center',\r\n  },\r\n  buttonDisabled: {\r\n    opacity: 0.7,\r\n  },\r\n  eyeIcon: {\r\n    padding: 10,\r\n  },\r\n});","import React, { useState } from 'react';\r\nimport { StyleSheet, Text, View, TextInput, TouchableOpacity, ImageBackground, SafeAreaView, Platform } from 'react-native';\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport { createUserWithEmailAndPassword, updateProfile } from 'firebase/auth';\r\nimport { auth, db } from '../App';\r\nimport * as Location from 'expo-location';\r\nimport { doc, setDoc, serverTimestamp } from 'firebase/firestore';\r\nimport * as Device from 'expo-device';\r\n\r\nexport default function SignUpScreen({ navigation }) {\r\n  const [username, setUsername] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const getCurrentLocation = async () => {\r\n    try {\r\n      const { status } = await Location.requestForegroundPermissionsAsync();\r\n      if (status !== 'granted') {\r\n        return null;\r\n      }\r\n\r\n      const location = await Location.getCurrentPositionAsync({});\r\n      return {\r\n        latitude: location.coords.latitude,\r\n        longitude: location.coords.longitude,\r\n        accuracy: location.coords.accuracy,\r\n        timestamp: new Date().toISOString()\r\n      };\r\n    } catch (error) {\r\n      console.error('Location error:', error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const getDeviceInfo = async () => {\r\n    return {\r\n      brand: Device.brand || 'unknown',\r\n      modelName: Device.modelName || 'unknown',\r\n      osName: Device.osName || Platform.OS,\r\n      osVersion: Device.osVersion || Platform.Version,\r\n      platform: Platform.OS\r\n    };\r\n  };\r\n\r\n  const handleSignUp = async () => {\r\n    if (!username.trim() || !email.trim() || !password.trim()) {\r\n      setError('All fields are required');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      setError('');\r\n\r\n      // Create user\r\n      const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n      const user = userCredential.user;\r\n\r\n      // Get location and device info\r\n      const [locationData, deviceInfo] = await Promise.all([\r\n        getCurrentLocation(),\r\n        getDeviceInfo()\r\n      ]);\r\n\r\n      // Update user profile with username\r\n      await updateProfile(user, {\r\n        displayName: username\r\n      });\r\n\r\n      // Create user document in Firestore\r\n      await setDoc(doc(db, 'users', user.uid), {\r\n        displayName: username,\r\n        email: email,\r\n        createdAt: serverTimestamp(),\r\n        lastLogin: serverTimestamp(),\r\n        lastSeen: serverTimestamp(),\r\n        registrationLocation: locationData || { latitude: 0, longitude: 0 },\r\n        location: locationData || { latitude: 0, longitude: 0 },\r\n        deviceInfo: deviceInfo\r\n      });\r\n\r\n      // Add initial location history if available\r\n      if (locationData) {\r\n        const historyId = new Date().toISOString();\r\n        await setDoc(doc(db, `users/${user.uid}/locationHistory/${historyId}`), {\r\n          ...locationData,\r\n          type: 'registration',\r\n          timestamp: serverTimestamp()\r\n        });\r\n      }\r\n\r\n    } catch (error) {\r\n      let errorMessage = 'An error occurred during sign up';\r\n      if (error.code === 'auth/email-already-in-use') {\r\n        errorMessage = 'This email is already registered';\r\n      } else if (error.code === 'auth/invalid-email') {\r\n        errorMessage = 'Invalid email address';\r\n      } else if (error.code === 'auth/weak-password') {\r\n        errorMessage = 'Password should be at least 6 characters';\r\n      }\r\n      setError(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <SafeAreaView style={styles.safeArea}>\r\n      <ImageBackground \r\n        source={require('../assets/background4c.jpg')} \r\n        style={styles.container}\r\n        resizeMode=\"cover\"\r\n        defaultSource={require('../assets/background4c.jpg')}\r\n      >\r\n        <View style={styles.overlay}>\r\n          <Text style={styles.appName}>Vault</Text>\r\n          <Text style={styles.title}>Create Account</Text>\r\n\r\n          <View style={styles.inputContainer}>\r\n            <Ionicons name=\"person-outline\" size={24} color=\"#666\" style={styles.inputIcon} />\r\n            <TextInput\r\n              style={styles.input}\r\n              placeholder=\"Username\"\r\n              value={username}\r\n              onChangeText={setUsername}\r\n              autoCapitalize=\"none\"\r\n            />\r\n          </View>\r\n\r\n          <View style={styles.inputContainer}>\r\n            <Ionicons name=\"mail-outline\" size={24} color=\"#666\" style={styles.inputIcon} />\r\n            <TextInput\r\n              style={styles.input}\r\n              placeholder=\"Email\"\r\n              value={email}\r\n              onChangeText={setEmail}\r\n              autoCapitalize=\"none\"\r\n              keyboardType=\"email-address\"\r\n            />\r\n          </View>\r\n\r\n          <View style={styles.inputContainer}>\r\n            <Ionicons name=\"lock-closed-outline\" size={24} color=\"#666\" style={styles.inputIcon} />\r\n            <TextInput\r\n              style={styles.input}\r\n              placeholder=\"Password\"\r\n              value={password}\r\n              onChangeText={setPassword}\r\n              secureTextEntry={!showPassword}\r\n            />\r\n            <TouchableOpacity\r\n              style={styles.eyeIcon}\r\n              onPress={() => setShowPassword(!showPassword)}\r\n            >\r\n              <Ionicons\r\n                name={showPassword ? 'eye-off' : 'eye'}\r\n                size={24}\r\n                color=\"#666\"\r\n              />\r\n            </TouchableOpacity>\r\n          </View>\r\n\r\n          {error ? <Text style={styles.errorText}>{error}</Text> : null}\r\n          \r\n          <TouchableOpacity \r\n            style={[styles.button, loading && styles.buttonDisabled]} \r\n            onPress={handleSignUp}\r\n            disabled={loading}\r\n          >\r\n            <Text style={styles.buttonText}>\r\n              {loading ? 'Creating Account...' : 'Sign Up'}\r\n            </Text>\r\n          </TouchableOpacity>\r\n          \r\n          <TouchableOpacity \r\n            style={styles.secondaryButton} \r\n            onPress={() => navigation.navigate('Login')}\r\n          >\r\n            <Text style={styles.secondaryButtonText}>\r\n              Already have an account? <Text style={styles.boldText}>Login</Text>\r\n            </Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </ImageBackground>\r\n    </SafeAreaView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  safeArea: {\r\n    flex: 1,\r\n    backgroundColor: '#000',\r\n  },\r\n  container: {\r\n    flex: 1,\r\n    width: '100%',\r\n    height: '100%',\r\n    backgroundColor: '#1a1a1a',\r\n  },\r\n  overlay: {\r\n    flex: 1,\r\n    backgroundColor: 'rgba(0, 0, 0, 0.3)',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    padding: 20,\r\n  },\r\n  appName: {\r\n    fontSize: 42,\r\n    fontWeight: 'bold',\r\n    color: '#FFFFFF',\r\n    marginBottom: 10,\r\n    letterSpacing: 2,\r\n  },\r\n  title: {\r\n    fontSize: 24,\r\n    fontWeight: '600',\r\n    color: '#FFFFFF',\r\n    marginBottom: 40,\r\n  },\r\n  inputContainer: {\r\n    width: '100%',\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n    borderRadius: 10,\r\n    marginBottom: 15,\r\n    backgroundColor: '#fff',\r\n  },\r\n  input: {\r\n    flex: 1,\r\n    height: 50,\r\n    paddingHorizontal: 15,\r\n    fontSize: 16,\r\n  },\r\n  inputIcon: {\r\n    paddingLeft: 15,\r\n  },\r\n  button: {\r\n    backgroundColor: '#333',\r\n    width: '100%',\r\n    padding: 15,\r\n    borderRadius: 10,\r\n    alignItems: 'center',\r\n    shadowColor: '#000',\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 2,\r\n    },\r\n    shadowOpacity: 0.25,\r\n    shadowRadius: 3.84,\r\n    elevation: 5,\r\n    marginBottom: 15,\r\n  },\r\n  buttonText: {\r\n    color: '#fff',\r\n    fontSize: 16,\r\n    fontWeight: 'bold',\r\n  },\r\n  secondaryButton: {\r\n    padding: 10,\r\n  },\r\n  secondaryButtonText: {\r\n    color: '#FFFFFF',\r\n    fontSize: 16,\r\n  },\r\n  boldText: {\r\n    fontWeight: 'bold',\r\n    color: '#FFFFFF',\r\n  },\r\n  errorText: {\r\n    color: '#ff6b6b',\r\n    marginBottom: 10,\r\n    textAlign: 'center',\r\n  },\r\n  buttonDisabled: {\r\n    opacity: 0.7,\r\n  },\r\n  eyeIcon: {\r\n    padding: 10,\r\n  }\r\n});","import { View, Text, FlatList, TouchableOpacity, StyleSheet, TextInput, ImageBackground, Alert, ScrollView } from 'react-native';\nimport { useState, useEffect, useContext } from 'react';\nimport { getFirestore, collection, query, where, getDocs, addDoc, onSnapshot, doc, setDoc, orderBy, limit, serverTimestamp, writeBatch } from 'firebase/firestore';\nimport { signOut } from 'firebase/auth';\nimport { auth } from '../App';\nimport { AuthContext } from '../App';\nimport { Ionicons } from '@expo/vector-icons';\nimport * as Location from 'expo-location';\n\nexport default function FriendList({ navigation }) {\n  const { user } = useContext(AuthContext);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState({ friends: [], newUsers: [] });\n  const [friends, setFriends] = useState([]);\n  const [isAddingFriend, setIsAddingFriend] = useState(false);\n  const db = getFirestore();\n\n  // Location tracking\n  useEffect(() => {\n    if (!user) return;\n\n    let locationSubscription;\n\n    const startLocationTracking = async () => {\n      try {\n        const { status } = await Location.requestForegroundPermissionsAsync();\n        if (status !== 'granted') {\n          console.log('Location permission denied');\n          return;\n        }\n\n        // Watch position and update Firestore\n        locationSubscription = await Location.watchPositionAsync(\n          {\n            accuracy: Location.Accuracy.Balanced,\n            timeInterval: 5000,\n            distanceInterval: 10\n          },\n          async (location) => {\n            const locationData = {\n              latitude: location.coords.latitude,\n              longitude: location.coords.longitude,\n              accuracy: location.coords.accuracy,\n              timestamp: new Date().toISOString()\n            };\n\n            try {\n              // Update user's current location\n              await setDoc(doc(db, 'users', user.uid), {\n                location: locationData,\n                lastSeen: serverTimestamp()\n              }, { merge: true });\n\n              // Add to location history\n              const historyId = new Date().toISOString();\n              await setDoc(\n                doc(db, `users/${user.uid}/locationHistory/${historyId}`),\n                {\n                  ...locationData,\n                  type: 'update',\n                  timestamp: serverTimestamp()\n                }\n              );\n            } catch (error) {\n              console.error('Error updating location:', error);\n            }\n          }\n        );\n      } catch (error) {\n        console.error('Error starting location tracking:', error);\n      }\n    };\n\n    startLocationTracking();\n\n    return () => {\n      if (locationSubscription) {\n        locationSubscription.remove();\n      }\n    };\n  }, [user]);\n\n  // Format last seen time\n  const formatLastSeen = (date) => {\n    if (!date) return '';\n    \n    const now = new Date();\n    const diff = now.getTime() - date.getTime();\n    const minutes = Math.floor(diff / 60000);\n    const hours = Math.floor(minutes / 60);\n    const days = Math.floor(hours / 24);\n\n    if (minutes < 1) return 'Just now';\n    if (minutes < 60) return `${minutes}m ago`;\n    if (hours < 24) return `${hours}h ago`;\n    if (days < 7) return `${days}d ago`;\n    \n    return date.toLocaleDateString();\n  };\n\n  // Fetch friends list and their last messages\n  useEffect(() => {\n    if (!user) return;\n\n    const friendsRef = collection(db, `users/${user.uid}/friends`);\n    const unsubscribe = onSnapshot(friendsRef, async (snapshot) => {\n      const friendsList = [];\n      \n      for (const doc of snapshot.docs) {\n        const friendData = doc.data();\n        \n        // Get friend's user document for online status\n        const friendDoc = await getDocs(query(collection(db, 'users'), where('uid', '==', friendData.uid)));\n        const friendUserData = friendDoc.docs[0]?.data() || {};\n        \n        // Get the last message if it exists\n        const chatId = [user.uid, friendData.uid].sort().join('_');\n        const messagesRef = collection(db, `chats/${chatId}/messages`);\n        const q = query(messagesRef, orderBy('timestamp', 'desc'), limit(1));\n        const messageSnap = await getDocs(q);\n        \n        const lastMessage = messageSnap.empty ? null : messageSnap.docs[0].data();\n        const now = new Date().getTime();\n        const lastSeen = friendUserData.lastSeen?.toDate().getTime() || 0;\n        const isOnline = now - lastSeen < 2 * 60 * 1000;\n\n        friendsList.push({\n          id: doc.id,\n          ...friendData,\n          lastMessage,\n          online: isOnline,\n          lastSeen: friendUserData.lastSeen?.toDate() || null\n        });\n      }\n      \n      setFriends(friendsList);\n    });\n\n    return () => unsubscribe();\n  }, [user]);\n\n  // Search for users\n  const handleSearch = async (query) => {\n    setSearchQuery(query);\n    if (!query.trim()) {\n      setSearchResults({ friends: [], newUsers: [] });\n      return;\n    }\n\n    try {\n      const searchQueryLower = query.toLowerCase().trim();\n      \n      // Filter existing friends\n      const filteredFriends = friends.filter(friend => \n        friend.displayName.toLowerCase().includes(searchQueryLower)\n      );\n\n      // Search for new users\n      const usersRef = collection(db, 'users');\n      const querySnapshot = await getDocs(usersRef);\n      const newUsers = [];\n      \n      querySnapshot.forEach((doc) => {\n        const userData = doc.data();\n        if (\n          doc.id !== user.uid && // Don't show current user\n          !friends.some(friend => friend.uid === doc.id) && // Don't show existing friends\n          userData.displayName && // Make sure displayName exists\n          userData.displayName.toLowerCase().includes(searchQueryLower)\n        ) {\n          newUsers.push({\n            id: doc.id,\n            ...userData\n          });\n        }\n      });\n      \n      setSearchResults({\n        friends: filteredFriends,\n        newUsers: newUsers\n      });\n    } catch (error) {\n      console.error('Search error:', error);\n      Alert.alert('Error', 'Failed to search for users');\n    }\n  };\n\n  // Verify friend data\n  const verifyFriendData = async (friendId) => {\n    try {\n      const friendDoc = await getDocs(query(collection(db, 'users'), where('uid', '==', friendId)));\n      if (friendDoc.empty) {\n        throw new Error('User not found');\n      }\n      return friendDoc.docs[0].data();\n    } catch (error) {\n      console.error('Error verifying friend:', error);\n      throw error;\n    }\n  };\n\n  // Add friend function\n  const addFriend = async (friendData) => {\n    if (isAddingFriend) return; // Prevent multiple simultaneous additions\n    \n    try {\n      setIsAddingFriend(true);\n\n      // Verify friend data first\n      const verifiedFriendData = await verifyFriendData(friendData.id);\n      if (!verifiedFriendData) {\n        throw new Error('User not found');\n      }\n\n      // Check if already friends\n      const existingFriendDoc = await getDocs(\n        query(collection(db, `users/${user.uid}/friends`), where('uid', '==', friendData.id))\n      );\n      \n      if (!existingFriendDoc.empty) {\n        Alert.alert('Info', 'You are already friends with this user');\n        return;\n      }\n\n      // Create a batch write to ensure both operations succeed or fail together\n      const batch = writeBatch(db);\n\n      // Add to current user's friends list\n      const currentUserFriendRef = doc(db, `users/${user.uid}/friends/${friendData.id}`);\n      batch.set(currentUserFriendRef, {\n        uid: friendData.id,\n        displayName: verifiedFriendData.displayName,\n        timestamp: serverTimestamp()\n      });\n\n      // Add current user to friend's friends list\n      const friendUserFriendRef = doc(db, `users/${friendData.id}/friends/${user.uid}`);\n      batch.set(friendUserFriendRef, {\n        uid: user.uid,\n        displayName: user.displayName,\n        timestamp: serverTimestamp()\n      });\n\n      // Create chat document\n      const chatId = [user.uid, friendData.id].sort().join('_');\n      const chatRef = doc(db, `chats/${chatId}`);\n      batch.set(chatRef, {\n        participants: [user.uid, friendData.id],\n        created: serverTimestamp()\n      });\n\n      // Commit the batch\n      await batch.commit();\n\n      // Clear search\n      setSearchQuery('');\n      setSearchResults({ friends: [], newUsers: [] });\n      Alert.alert('Success', 'Friend added successfully');\n    } catch (error) {\n      console.error('Error adding friend:', error);\n      let errorMessage = 'Failed to add friend. Please try again.';\n      if (error.message === 'User not found') {\n        errorMessage = 'User not found. They may have deleted their account.';\n      }\n      Alert.alert('Error', errorMessage);\n    } finally {\n      setIsAddingFriend(false);\n    }\n  };\n\n  const handleSignOut = async () => {\n    try {\n      await signOut(auth);\n    } catch (error) {\n      console.error('Error signing out:', error);\n      Alert.alert('Error', 'Failed to sign out');\n    }\n  };\n\n  const renderSearchResult = ({ item }) => (\n    <TouchableOpacity \n      style={styles.searchResultItem}\n      onPress={() => addFriend(item)}\n      disabled={isAddingFriend}\n    >\n      <View style={styles.avatarContainer}>\n        <Text style={styles.avatarText}>{item.displayName[0].toUpperCase()}</Text>\n      </View>\n      <Text style={styles.friendName}>{item.displayName}</Text>\n      <TouchableOpacity \n        style={[styles.addButton, isAddingFriend && styles.addButtonDisabled]}\n        onPress={() => addFriend(item)}\n        disabled={isAddingFriend}\n      >\n        <Text style={[styles.addButtonText, isAddingFriend && styles.addButtonTextDisabled]}>\n          {isAddingFriend ? 'Adding...' : 'Add'}\n        </Text>\n      </TouchableOpacity>\n    </TouchableOpacity>\n  );\n\n  const renderFriend = ({ item }) => (\n    <TouchableOpacity \n      style={styles.friendItem}\n      onPress={() => navigation.navigate('Chat', { \n        friendId: item.uid,\n        friendName: item.displayName \n      })}\n    >\n      <View style={styles.avatarWrapper}>\n        <View style={styles.avatarContainer}>\n          <Text style={styles.avatarText}>{item.displayName[0].toUpperCase()}</Text>\n        </View>\n        {item.online && <View style={styles.onlineIndicator} />}\n      </View>\n      <View style={styles.friendInfo}>\n        <View style={styles.friendNameContainer}>\n          <Text style={styles.friendName}>{item.displayName}</Text>\n          <Text style={[styles.statusText, item.online ? styles.onlineText : styles.offlineText]}>\n            {item.online ? 'Online' : item.lastSeen ? formatLastSeen(item.lastSeen) : 'Offline'}\n          </Text>\n        </View>\n        {item.lastMessage && (\n          <View style={styles.lastMessageContainer}>\n            <Text style={styles.lastMessage} numberOfLines={1}>\n              {item.lastMessage.text}\n            </Text>\n            {item.lastMessage.timestamp && (\n              <Text style={styles.messageTime}>\n                 {new Date(item.lastMessage.timestamp.toDate()).toLocaleTimeString([], { \n                    hour: '2-digit', \n                    minute: '2-digit' \n                  })}\n              </Text>\n            )}\n          </View>\n        )}\n      </View>\n    </TouchableOpacity>\n  );\n\n  const renderSearchSection = () => {\n    if (!searchQuery) return null;\n\n    const { friends: filteredFriends, newUsers } = searchResults;\n\n    return (\n      <View style={styles.searchResultsContainer}>\n        <ScrollView style={styles.searchScrollView}>\n          {filteredFriends.length > 0 && (\n            <View style={styles.searchSection}>\n              <View style={styles.sectionHeader}>\n                <Ionicons name=\"people\" size={20} color=\"#fff\" />\n                <Text style={styles.searchSectionTitle}>Your Friends</Text>\n              </View>\n              {filteredFriends.map((friend) => (\n                <View key={friend.id} style={styles.searchItemContainer}>\n                  {renderFriend({ item: friend })}\n                </View>\n              ))}\n            </View>\n          )}\n\n          {newUsers.length > 0 && (\n            <View style={styles.searchSection}>\n              <View style={styles.sectionHeader}>\n                <Ionicons name=\"person-add\" size={20} color=\"#fff\" />\n                <Text style={styles.searchSectionTitle}>Add New Friends</Text>\n              </View>\n              {newUsers.map((user) => (\n                <View key={user.id} style={styles.searchItemContainer}>\n                  <TouchableOpacity \n                    style={styles.searchResultItem}\n                    onPress={() => addFriend(user)}\n                    disabled={isAddingFriend}\n                  >\n                    <View style={styles.avatarContainer}>\n                      <Text style={styles.avatarText}>{user.displayName[0].toUpperCase()}</Text>\n                    </View>\n                    <Text style={styles.friendName}>{user.displayName}</Text>\n                    <TouchableOpacity \n                      style={[styles.addButton, isAddingFriend && styles.addButtonDisabled]}\n                      onPress={() => addFriend(user)}\n                      disabled={isAddingFriend}\n                    >\n                      <Text style={[styles.addButtonText, isAddingFriend && styles.addButtonTextDisabled]}>\n                        {isAddingFriend ? 'Adding...' : 'Add'}\n                      </Text>\n                    </TouchableOpacity>\n                  </TouchableOpacity>\n                </View>\n              ))}\n            </View>\n          )}\n\n          {filteredFriends.length === 0 && newUsers.length === 0 && (\n            <View style={styles.noResultsContainer}>\n              <Ionicons name=\"search\" size={40} color=\"#fff\" style={styles.noResultsIcon} />\n              <Text style={styles.noResultsText}>No users found</Text>\n            </View>\n          )}\n        </ScrollView>\n      </View>\n    );\n  };\n\n  return (\n    <ImageBackground \n      source={require('../assets/background4c.jpg')} \n      style={styles.container}\n      resizeMode=\"stretch\"\n    >\n      <View style={styles.overlay}>\n        <View style={styles.header}>\n          <View style={styles.headerTop}>\n            <Text style={styles.headerTitle}>Chats</Text>\n            <TouchableOpacity \n              style={styles.signOutButton} \n              onPress={handleSignOut}\n            >\n              <Ionicons name=\"log-out-outline\" size={24} color=\"#fff\" />\n            </TouchableOpacity>\n          </View>\n          <View style={styles.searchContainer}>\n            <View style={styles.searchInputContainer}>\n              <Ionicons name=\"search\" size={20} color=\"#666\" style={styles.searchIcon} />\n              <TextInput\n                style={styles.searchInput}\n                placeholder=\"Search for user\"\n                value={searchQuery}\n                onChangeText={handleSearch}\n                placeholderTextColor=\"#666\"\n              />\n              {searchQuery ? (\n                <TouchableOpacity \n                  style={styles.clearButton}\n                  onPress={() => {\n                    setSearchQuery('');\n                    setSearchResults({ friends: [], newUsers: [] });\n                  }}\n                >\n                  <Ionicons name=\"close-circle\" size={20} color=\"#666\" />\n                </TouchableOpacity>\n              ) : null}\n            </View>\n          </View>\n        </View>\n        \n        {searchQuery ? (\n          renderSearchSection()\n        ) : (\n          <FlatList\n            data={friends}\n            renderItem={renderFriend}\n            keyExtractor={item => item.id}\n            style={styles.list}\n          />\n        )}\n      </View>\n    </ImageBackground>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    width: '100%',\n    height: '100%',\n  },\n  overlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.3)',\n  },\n  header: {\n    padding: 16,\n    paddingTop: 50,\n    backgroundColor: 'transparent',\n  },\n  headerTitle: {\n    fontSize: 42,\n    fontWeight: 'bold',\n    color: '#FFFFFF',\n    letterSpacing: 2,\n  },\n  searchContainer: {\n    marginTop: 10,\n    marginBottom: 5,\n    paddingHorizontal: 8,\n  },\n  searchInputContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#fff',\n    borderRadius: 10,\n    paddingHorizontal: 10,\n  },\n  searchIcon: {\n    marginRight: 8,\n  },\n  searchInput: {\n    flex: 1,\n    paddingVertical: 8,\n    fontSize: 16,\n    color: '#333',\n  },\n  friendItem: {\n    padding: 12,\n    backgroundColor: 'rgba(255, 255, 255, 0.9)',\n    flexDirection: 'row',\n    alignItems: 'center',\n    borderBottomWidth: 1,\n    borderBottomColor: 'rgba(238, 238, 238, 0.5)',\n    marginHorizontal: 10,\n    marginVertical: 5,\n    borderRadius: 10,\n  },\n  avatarContainer: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    backgroundColor: '#333',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 12,\n  },\n  avatarText: {\n    color: '#fff',\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  friendInfo: {\n    flex: 1,\n  },\n  friendName: {\n    fontSize: 16,\n    fontWeight: '600',\n    marginBottom: 4,\n  },\n  lastMessageContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  lastMessage: {\n    fontSize: 14,\n    color: '#666',\n    flex: 1,\n  },\n  messageTime: {\n    fontSize: 12,\n    color: '#666',\n    marginLeft: 4,\n  },\n  searchResultItem: {\n    padding: 12,\n    backgroundColor: 'rgba(255, 255, 255, 0.9)',\n    flexDirection: 'row',\n    alignItems: 'center',\n    borderRadius: 10,\n  },\n  addButton: {\n    backgroundColor: '#333',\n    paddingHorizontal: 15,\n    paddingVertical: 6,\n    borderRadius: 10,\n    marginLeft: 'auto',\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5,\n  },\n  addButtonDisabled: {\n    backgroundColor: '#999',\n  },\n  addButtonText: {\n    color: '#fff',\n    fontWeight: '600',\n  },\n  addButtonTextDisabled: {\n    color: '#ccc',\n  },\n  headerTop: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    width: '100%',\n  },\n  signOutButton: {\n    padding: 8,\n    borderRadius: 20,\n    backgroundColor: 'rgba(255, 255, 255, 0.2)',\n  },\n  list: {\n    flex: 1,\n    width: '100%',\n  },\n  avatarWrapper: {\n    position: 'relative',\n    marginRight: 12,\n  },\n  onlineIndicator: {\n    position: 'absolute',\n    bottom: 0,\n    right: 0,\n    width: 12,\n    height: 12,\n    borderRadius: 6,\n    backgroundColor: '#4CAF50',\n    borderWidth: 2,\n    borderColor: '#fff',\n  },\n  friendNameContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginBottom: 4,\n  },\n  statusText: {\n    fontSize: 12,\n    marginLeft: 8,\n  },\n  onlineText: {\n    color: '#4CAF50',\n  },\n  offlineText: {\n    color: '#666',\n  },\n  searchResultsContainer: {\n    flex: 1,\n  },\n  searchScrollView: {\n    flex: 1,\n  },\n  searchSection: {\n    marginBottom: 15,\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n    borderRadius: 15,\n    padding: 10,\n    marginHorizontal: 10,\n  },\n  sectionHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 10,\n    paddingHorizontal: 5,\n  },\n  searchSectionTitle: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#fff',\n    marginLeft: 8,\n  },\n  searchItemContainer: {\n    marginBottom: 8,\n  },\n  searchInputContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#fff',\n    borderRadius: 10,\n    paddingHorizontal: 10,\n  },\n  searchIcon: {\n    marginRight: 8,\n  },\n  searchInput: {\n    flex: 1,\n    paddingVertical: 8,\n    fontSize: 16,\n    color: '#333',\n  },\n  clearButton: {\n    padding: 4,\n  },\n  noResultsContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingTop: 50,\n  },\n  noResultsIcon: {\n    marginBottom: 10,\n    opacity: 0.7,\n  },\n  noResultsText: {\n    color: '#fff',\n    fontSize: 16,\n    opacity: 0.7,\n  },\n});","import React, { useState, useEffect, useContext } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  FlatList,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  Platform,\r\n  KeyboardAvoidingView,\r\n  Alert,\r\n  ImageBackground,\r\n  Image,\r\n} from 'react-native';\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport { getFirestore, collection, query, orderBy, onSnapshot, addDoc, serverTimestamp, doc } from 'firebase/firestore';\r\nimport { getStorage, ref, uploadBytes, getDownloadURL } from 'firebase/storage';\r\nimport { AuthContext } from '../App';\r\n\r\nexport default function Chat({ route, navigation }) {\r\n  const { friendId, friendName } = route.params;\r\n  const { user } = useContext(AuthContext);\r\n  const [message, setMessage] = useState('');\r\n  const [messages, setMessages] = useState([]);\r\n  const [friendStatus, setFriendStatus] = useState({ online: false, lastSeen: null });\r\n  const db = getFirestore();\r\n  const storage = getStorage();\r\n\r\n  // Listen to friend's online status\r\n  useEffect(() => {\r\n    if (!user || !friendId) return;\r\n\r\n    const friendRef = doc(db, 'users', friendId);\r\n    const unsubscribe = onSnapshot(friendRef, (doc) => {\r\n      if (doc.exists()) {\r\n        const data = doc.data();\r\n        const now = new Date().getTime();\r\n        const lastSeen = data.lastSeen?.toDate().getTime() || 0;\r\n        \r\n        // Consider user online if last seen within last 2 minutes\r\n        const isOnline = now - lastSeen < 2 * 60 * 1000;\r\n        \r\n        setFriendStatus({\r\n          online: isOnline,\r\n          lastSeen: data.lastSeen?.toDate() || null\r\n        });\r\n      }\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [friendId]);\r\n\r\n  // Format last seen time\r\n  const formatLastSeen = (date) => {\r\n    if (!date) return '';\r\n    \r\n    const now = new Date();\r\n    const diff = now.getTime() - date.getTime();\r\n    const minutes = Math.floor(diff / 60000);\r\n    const hours = Math.floor(minutes / 60);\r\n    const days = Math.floor(hours / 24);\r\n\r\n    if (minutes < 1) return 'Just now';\r\n    if (minutes < 60) return `${minutes}m ago`;\r\n    if (hours < 24) return `${hours}h ago`;\r\n    if (days < 7) return `${days}d ago`;\r\n    \r\n    return date.toLocaleDateString();\r\n  };\r\n\r\n  // Listen to messages\r\n  useEffect(() => {\r\n    if (!user || !friendId) return;\r\n\r\n    const chatId = [user.uid, friendId].sort().join('_');\r\n    const messagesRef = collection(db, `chats/${chatId}/messages`);\r\n    const q = query(messagesRef, orderBy('timestamp', 'asc'));\r\n\r\n    const unsubscribe = onSnapshot(q, (snapshot) => {\r\n      const messageList = [];\r\n      snapshot.forEach((doc) => {\r\n        messageList.push({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n          sender: doc.data().senderId === user.uid ? 'me' : 'friend'\r\n        });\r\n      });\r\n      setMessages(messageList);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [user, friendId]);\r\n\r\n  const sendMessage = async () => {\r\n    if (!message.trim()) return;\r\n\r\n    try {\r\n      const chatId = [user.uid, friendId].sort().join('_');\r\n      const messagesRef = collection(db, `chats/${chatId}/messages`);\r\n      \r\n      await addDoc(messagesRef, {\r\n        text: message,\r\n        senderId: user.uid,\r\n        timestamp: serverTimestamp(),\r\n        type: 'text'\r\n      });\r\n\r\n      setMessage('');\r\n    } catch (error) {\r\n      console.error('Error sending message:', error);\r\n      Alert.alert('Error', 'Failed to send message');\r\n    }\r\n  };\r\n\r\n  const handleAttachment = async () => {\r\n    try {\r\n      const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\r\n      \r\n      if (status !== 'granted') {\r\n        Alert.alert('Sorry, we need camera roll permissions to make this work!');\r\n        return;\r\n      }\r\n\r\n      const result = await ImagePicker.launchImageLibraryAsync({\r\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\r\n        quality: 1,\r\n        allowsEditing: true,\r\n      });\r\n\r\n      if (!result.canceled && result.assets && result.assets.length > 0) {\r\n        await uploadMedia(result.assets[0].uri);\r\n      }\r\n    } catch (error) {\r\n      Alert.alert('Error', 'Failed to pick image');\r\n    }\r\n  };\r\n\r\n  const uploadMedia = async (uri) => {\r\n    try {\r\n      const response = await fetch(uri);\r\n      const blob = await response.blob();\r\n      const filename = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\r\n      const storageRef = ref(storage, `chat-media/${filename}`);\r\n      \r\n      await uploadBytes(storageRef, blob);\r\n      const downloadURL = await getDownloadURL(storageRef);\r\n\r\n      const chatId = [user.uid, friendId].sort().join('_');\r\n      const messagesRef = collection(db, `chats/${chatId}/messages`);\r\n      \r\n      await addDoc(messagesRef, {\r\n        mediaUrl: downloadURL,\r\n        senderId: user.uid,\r\n        timestamp: serverTimestamp(),\r\n        type: 'image'\r\n      });\r\n    } catch (error) {\r\n      console.error('Error uploading media:', error);\r\n      Alert.alert('Error', 'Failed to upload media');\r\n    }\r\n  };\r\n\r\n  const renderMessage = ({ item }) => (\r\n    <View style={[\r\n      styles.messageBubble,\r\n      item.sender === 'me' ? styles.myMessage : styles.friendMessage\r\n    ]}>\r\n      {item.type === 'image' ? (\r\n        <Image \r\n          source={{ uri: item.mediaUrl }} \r\n          style={styles.messageImage}\r\n          resizeMode=\"cover\"\r\n        />\r\n      ) : (\r\n        <Text style={[\r\n          styles.messageText,\r\n          item.sender === 'me' ? styles.myMessageText : styles.friendMessageText\r\n        ]}>\r\n          {item.text}\r\n        </Text>\r\n      )}\r\n      {item.timestamp && (\r\n        <Text style={styles.timestamp}>\r\n          {new Date(item.timestamp.toDate()).toLocaleTimeString([], {\r\n            hour: '2-digit',\r\n            minute: '2-digit'\r\n          })}\r\n        </Text>\r\n      )}\r\n    </View>\r\n  );\r\n\r\n  return (\r\n    <KeyboardAvoidingView \r\n      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\r\n      style={styles.container}\r\n    >\r\n      <ImageBackground \r\n        source={require('../assets/background4c.jpg')} \r\n        style={styles.backgroundImage}\r\n        resizeMode=\"stretch\"\r\n      >\r\n        <View style={styles.overlay}>\r\n          <View style={styles.header}>\r\n            <TouchableOpacity \r\n              style={styles.backButton} \r\n              onPress={() => navigation.goBack()}\r\n            >\r\n              <Ionicons name=\"arrow-back\" size={24} color=\"#fff\" />\r\n            </TouchableOpacity>\r\n            \r\n            <View style={styles.profileContainer}>\r\n              <View style={styles.avatarContainer}>\r\n                <Text style={styles.avatarText}>\r\n                  {friendName[0].toUpperCase()}\r\n                </Text>\r\n              </View>\r\n              <View style={styles.headerInfo}>\r\n                <Text style={styles.headerTitle}>{friendName}</Text>\r\n                <Text style={[\r\n                  styles.statusText,\r\n                  friendStatus.online ? styles.onlineText : styles.offlineText\r\n                ]}>\r\n                  {friendStatus.online \r\n                    ? 'Online'\r\n                    : friendStatus.lastSeen \r\n                      ? `Last seen ${formatLastSeen(friendStatus.lastSeen)}`\r\n                      : 'Offline'\r\n                  }\r\n                </Text>\r\n              </View>\r\n            </View>\r\n          </View>\r\n\r\n          <FlatList\r\n            data={messages}\r\n            renderItem={renderMessage}\r\n            keyExtractor={item => item.id}\r\n            contentContainerStyle={styles.messageList}\r\n            inverted={false}\r\n          />\r\n\r\n          <View style={styles.inputContainer}>\r\n            <TouchableOpacity \r\n              style={styles.attachButton} \r\n              onPress={handleAttachment}\r\n            >\r\n              <Ionicons name=\"attach\" size={24} color=\"#333\" />\r\n            </TouchableOpacity>\r\n            \r\n            <TextInput\r\n              style={styles.input}\r\n              value={message}\r\n              onChangeText={setMessage}\r\n              placeholder=\"Type a message...\"\r\n              multiline\r\n              maxLength={500}\r\n            />\r\n            \r\n            <TouchableOpacity \r\n              style={[styles.sendButton, !message.trim() && styles.sendButtonDisabled]}\r\n              onPress={sendMessage}\r\n              disabled={!message.trim()}\r\n            >\r\n              <Ionicons \r\n                name=\"send\" \r\n                size={24} \r\n                color={message.trim() ? \"#fff\" : \"#999\"} \r\n              />\r\n            </TouchableOpacity>\r\n          </View>\r\n        </View>\r\n      </ImageBackground>\r\n    </KeyboardAvoidingView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#000',\r\n  },\r\n  backgroundImage: {\r\n    flex: 1,\r\n    width: '100%',\r\n    height: '100%',\r\n  },\r\n  overlay: {\r\n    flex: 1,\r\n    backgroundColor: 'rgba(0, 0, 0, 0.3)',\r\n  },\r\n  header: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    padding: 16,\r\n    backgroundColor: 'rgba(0, 0, 0, 0.3)',\r\n    paddingTop: Platform.OS === 'ios' ? 50 : 16,\r\n  },\r\n  backButton: {\r\n    padding: 8,\r\n  },\r\n  profileContainer: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    flex: 1,\r\n    marginLeft: 8,\r\n  },\r\n  avatarContainer: {\r\n    width: 40,\r\n    height: 40,\r\n    borderRadius: 20,\r\n    backgroundColor: '#333',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginRight: 12,\r\n  },\r\n  avatarText: {\r\n    color: '#fff',\r\n    fontSize: 18,\r\n    fontWeight: 'bold',\r\n  },\r\n  headerTitle: {\r\n    fontSize: 18,\r\n    fontWeight: 'bold',\r\n    color: '#fff',\r\n  },\r\n  headerInfo: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n  },\r\n  statusText: {\r\n    fontSize: 12,\r\n    marginTop: 2,\r\n    color: '#fff',\r\n  },\r\n  onlineText: {\r\n    color: '#4CAF50',\r\n  },\r\n  offlineText: {\r\n    color: '#bbb',\r\n  },\r\n  messageList: {\r\n    padding: 16,\r\n  },\r\n  messageBubble: {\r\n    maxWidth: '80%',\r\n    padding: 12,\r\n    borderRadius: 16,\r\n    marginBottom: 8,\r\n  },\r\n  myMessage: {\r\n    backgroundColor: '#333',\r\n    alignSelf: 'flex-end',\r\n    borderBottomRightRadius: 4,\r\n  },\r\n  friendMessage: {\r\n    backgroundColor: 'rgba(255, 255, 255, 0.9)',\r\n    alignSelf: 'flex-start',\r\n    borderBottomLeftRadius: 4,\r\n  },\r\n  messageText: {\r\n    fontSize: 16,\r\n  },\r\n  myMessageText: {\r\n    color: '#fff',\r\n  },\r\n  friendMessageText: {\r\n    color: '#000',\r\n  },\r\n  messageImage: {\r\n    width: 200,\r\n    height: 200,\r\n    borderRadius: 8,\r\n  },\r\n  timestamp: {\r\n    fontSize: 12,\r\n    color: '#666',\r\n    alignSelf: 'flex-end',\r\n    marginTop: 4,\r\n  },\r\n  inputContainer: {\r\n    flexDirection: 'row',\r\n    padding: 8,\r\n    backgroundColor: 'rgba(255, 255, 255, 0.9)',\r\n    alignItems: 'center',\r\n    margin: 8,\r\n    borderRadius: 24,\r\n  },\r\n  attachButton: {\r\n    padding: 8,\r\n  },\r\n  input: {\r\n    flex: 1,\r\n    backgroundColor: 'transparent',\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 8,\r\n    maxHeight: 100,\r\n    fontSize: 16,\r\n  },\r\n  sendButton: {\r\n    backgroundColor: '#333',\r\n    width: 40,\r\n    height: 40,\r\n    borderRadius: 20,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  sendButtonDisabled: {\r\n    backgroundColor: '#ccc',\r\n  },\r\n});\r\n","import { StatusBar } from 'expo-status-bar';\nimport { StyleSheet, View, ActivityIndicator } from 'react-native';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, onAuthStateChanged } from 'firebase/auth';\nimport { createContext, useState, useEffect } from 'react';\nimport LoginScreen from './screens/LoginScreen';\nimport SignUpScreen from './screens/SignUpScreen';\nimport FriendsList from './screens/FriendsList';\nimport Chat from './screens/Chat';\nimport { getFirestore, setDoc, doc } from 'firebase/firestore';\n\n// Your Firebase configuration\nconst firebaseConfig = {\n  // Add your Firebase config here\n  apiKey: \"AIzaSyCSqR2bBqvxsOHdANWH10UCWtR15tukKBs\",\n  authDomain: \"vaultrn.firebaseapp.com\",\n  projectId: \"vaultrn\",\n  storageBucket: \"vaultrn.firebasestorage.app\",\n  messagingSenderId: \"962260241751\",\n  appId: \"1:962260241751:web:7e6ac40a01c2f518768212\",\n  measurementId: \"G-EWM0JESQZW\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nexport const auth = getAuth(app);\nexport const AuthContext = createContext();\nexport const db = getFirestore(app);\n\nconst Stack = createNativeStackNavigator();\n\nexport default function App() {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\n      if (user) {\n        // Create/update user document in Firestore\n        await setDoc(doc(db, 'users', user.uid), {\n          displayName: user.displayName,\n          email: user.email,\n          lastSeen: new Date().toISOString(),\n        }, { merge: true });\n      }\n      setUser(user);\n      setLoading(false);\n    });\n\n    return () => unsubscribe();\n  }, []);\n\n  if (loading) {\n    return (\n      <View style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color=\"#333\" />\n      </View>\n    );\n  }\n\n  return (\n    <NavigationContainer>\n      <AuthContext.Provider value={{ user, setUser }}>\n        <Stack.Navigator \n          initialRouteName={user ? \"FriendsList\" : \"Login\"}\n          screenOptions={{\n            headerShown: false,\n            animation: 'fade'\n          }}\n        >\n          {!user ? (\n            <>\n              <Stack.Screen name=\"Login\" component={LoginScreen} />\n              <Stack.Screen name=\"SignUp\" component={SignUpScreen} />\n            </>\n          ) : (\n            <>\n              <Stack.Screen name=\"FriendsList\" component={FriendsList} />\n              <Stack.Screen name=\"Chat\" component={Chat} />\n            </>\n          )}\n        </Stack.Navigator>\n      </AuthContext.Provider>\n      <StatusBar style=\"light\" />\n    </NavigationContainer>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#1a1a1a',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#1a1a1a',\n  },\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdO = {};","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb\"] = self[\"webpackChunkweb\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [936], () => (__webpack_require__(4424)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["LoginScreen","navigation","email","setEmail","useState","password","setPassword","showPassword","setShowPassword","loading","setLoading","error","setError","getCurrentLocation","async","status","Location","requestForegroundPermissionsAsync","location","getCurrentPositionAsync","latitude","coords","longitude","accuracy","timestamp","Date","toISOString","console","getDeviceInfo","brand","Device","modelName","osName","osVersion","Platform","Version","platform","_jsx","SafeAreaView","style","styles","safeArea","children","ImageBackground","source","require","container","resizeMode","defaultSource","_jsxs","View","overlay","Text","appName","title","inputContainer","Ionicons","name","size","color","inputIcon","TextInput","input","placeholder","value","onChangeText","autoCapitalize","keyboardType","secureTextEntry","TouchableOpacity","eyeIcon","onPress","errorText","button","buttonDisabled","trim","user","signInWithEmailAndPassword","auth","locationData","deviceInfo","Promise","all","setDoc","doc","db","uid","lastLogin","serverTimestamp","lastSeen","merge","historyId","Object","assign","type","errorMessage","code","disabled","buttonText","secondaryButton","navigate","secondaryButtonText","boldText","StyleSheet","create","flex","backgroundColor","width","height","alignItems","justifyContent","padding","fontSize","fontWeight","marginBottom","letterSpacing","flexDirection","borderWidth","borderColor","borderRadius","paddingHorizontal","paddingLeft","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","textAlign","opacity","SignUpScreen","username","setUsername","createUserWithEmailAndPassword","updateProfile","displayName","createdAt","registrationLocation","FriendList","useContext","AuthContext","searchQuery","setSearchQuery","searchResults","setSearchResults","friends","newUsers","setFriends","isAddingFriend","setIsAddingFriend","getFirestore","useEffect","locationSubscription","log","watchPositionAsync","Balanced","timeInterval","distanceInterval","startLocationTracking","remove","formatLastSeen","date","diff","getTime","minutes","Math","floor","hours","days","toLocaleDateString","friendsRef","collection","unsubscribe","onSnapshot","friendsList","snapshot","docs","friendData","data","friendDoc","getDocs","query","where","friendUserData","chatId","sort","join","messagesRef","q","orderBy","limit","messageSnap","lastMessage","empty","isOnline","toDate","push","id","online","addFriend","verifiedFriendData","friendId","Error","verifyFriendData","Alert","alert","batch","writeBatch","currentUserFriendRef","set","friendUserFriendRef","chatRef","participants","created","commit","message","renderFriend","item","friendItem","friendName","avatarWrapper","avatarContainer","avatarText","toUpperCase","onlineIndicator","friendInfo","friendNameContainer","statusText","onlineText","offlineText","lastMessageContainer","numberOfLines","text","messageTime","toLocaleTimeString","hour","minute","header","headerTop","headerTitle","signOutButton","signOut","searchContainer","searchInputContainer","searchIcon","searchInput","searchQueryLower","toLowerCase","filteredFriends","filter","friend","includes","usersRef","querySnapshot","forEach","userData","some","placeholderTextColor","clearButton","renderSearchSection","searchResultsContainer","ScrollView","searchScrollView","length","searchSection","sectionHeader","searchSectionTitle","map","searchItemContainer","searchResultItem","addButton","addButtonDisabled","addButtonText","addButtonTextDisabled","noResultsContainer","noResultsIcon","noResultsText","FlatList","renderItem","keyExtractor","list","paddingTop","marginTop","marginRight","paddingVertical","borderBottomWidth","borderBottomColor","marginHorizontal","marginVertical","marginLeft","position","bottom","right","Chat","route","params","setMessage","messages","setMessages","friendStatus","setFriendStatus","storage","getStorage","friendRef","exists","now","messageList","sender","senderId","uploadMedia","response","fetch","uri","blob","filename","random","toString","substring","storageRef","ref","uploadBytes","downloadURL","getDownloadURL","addDoc","mediaUrl","KeyboardAvoidingView","behavior","backgroundImage","backButton","goBack","profileContainer","headerInfo","renderMessage","messageBubble","myMessage","friendMessage","Image","messageImage","messageText","myMessageText","friendMessageText","contentContainerStyle","inverted","attachButton","ImagePicker","requestMediaLibraryPermissionsAsync","result","launchImageLibraryAsync","mediaTypes","Images","quality","allowsEditing","canceled","assets","multiline","maxLength","sendButton","sendButtonDisabled","maxWidth","alignSelf","borderBottomRightRadius","borderBottomLeftRadius","margin","maxHeight","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","getAuth","createContext","Stack","createNativeStackNavigator","App","setUser","onAuthStateChanged","loadingContainer","ActivityIndicator","NavigationContainer","Provider","Navigator","initialRouteName","screenOptions","headerShown","animation","_Fragment","Screen","component","FriendsList","StatusBar","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","amdO","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","keys","every","key","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","this","Function","e","window","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}